<div id="comment-form-container">
{% include 'comment-form.html' %}
</div>
{% for comment in comments %}
    {% if comment.parent_id == post_type ~ post_id|string%}
    <div class="comment">
        <p><strong>{{ comment.username }}</strong>: {{ comment.content }}</p>
        {%if current_user.username == comment.username%}

        {%else%}
        <button class="reply-button" data-username="{{ comment.username }}">Reply</button>
        {%endif%}
    </div>
    {% endif %}
{% endfor %}

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const replyButtons = document.querySelectorAll(".reply-button");
        const commentFormContainer = document.getElementById("comment-form-container");
        const commentInput = commentFormContainer.querySelector("textarea"); // Find the input field

        replyButtons.forEach(button => {
            button.addEventListener("click", function() {
                const username = this.getAttribute("data-username");
                commentInput.value = `@${username} `; // Pre-fill with username

                // Move the form below the clicked comment
                this.parentElement.appendChild(commentFormContainer);
                commentFormContainer.style.display = "block";
                commentInput.focus(); // Focus input field
            });
        });
    });
</script>
